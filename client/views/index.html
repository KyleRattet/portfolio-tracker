<!DOCTYPE html>
<html ng-app="myApp">
  <head>
    <meta charset="utf-8">
    <title></title>
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/main.css">
  </head>
  <body>

  <div ng-controller = "MainController">

  <div class="row">

  <form class='col-xs-6 form-inline' >
    <div class="form-group">
      <label  for="exampleInputEmail1">Stock Ticker: </label>
      <input ng-model="symbol"type="text" class="form-control" size="5" placeholder="Ticker">
    </div>
    <button type="submit" ng-click="getQuote(symbol)" class="btn btn-info">Get Quote</button>
  </form>



  </div>
  <hr>

<!-- quote render section -->

  <div class="row quote-render">



    <div class="row">
      <div class="col-xs-4"><strong>Name:</strong> {{stockData.Name}}</div>
      <div class="col-xs-4"><strong>Symbol:</strong> {{stockData.Symbol}}</div>
    </div>
    <div class="row">
      <div class="col-xs-4"><strong>Price:</strong> {{stockData.LastTradePriceOnly}}</div>
      <div class="col-xs-4"><strong>Change:</strong> {{stockData.Change}}</div>
      <div class="col-xs-4"><strong>% Change:</strong> {{stockData.ChangeinPercent}}</div>
    </div>
    <div class="row">
      <div class="col-xs-4"><strong>Volume:</strong> {{stockData.Volume}}</div>
      <div class="col-xs-4"><strong>Avg. Daily Vol.:</strong> {{stockData.AverageDailyVolume}}</div>
      <div class="col-xs-4"><strong>Mkt. Cap:</strong> {{stockData.MarketCapitalization}}</div>
    </div>
    <div class="row">
      <div class="col-xs-4"><strong>Dividend: </strong>{{stockData.DividendShare}}</div>
      <div class="col-xs-4"><strong>Dividend Yld.:</strong> {{stockData.DividendYield}}</div>
      <div class="col-xs-4"><strong>Ex-Div Date:</strong> {{stockData.ExDividendDate}}</div>
    </div>
    <div class="row">
      <div class="col-xs-4"><strong>P/E:</strong> {{stockData.PERatio}}</div>
      <div class="col-xs-4"><strong>PEG:</strong> {{stockData.PEGRatio}}</div>
      <div class="col-xs-4"><strong>Price/Sales:</strong> {{stockData.PriceSales}}</div>
    </div>
    <div class="row">
      <div class="col-xs-4"><strong>EPS Est. Current Yr.:</strong> {{stockData.EPSEstimateCurrentYear}}</div>
      <div class="col-xs-4"><strong>EPS Est. Next Yr.:</strong> {{stockData.EPSEstimateNextYear}}</div>
      <div class="col-xs-4"><strong>1 Yr. Price Target:</strong> {{stockData.OneyrTargetPrice}}</div>
    </div>

  </div>

  <hr>

<!-- add stock, transaction form -->
  <div class="row add-form">

    <form>
      <div class="col-xs-2 form-group">
        <label>Symbol</label>
        <input type="text" class="form-control" id="symbol" ng-model="stockData.Symbol">
      </div>
      <div class="col-xs-2 form-group">
        <label>Price</label>
        <input type="text" class="form-control" id="price" ng-model="stockData.LastTradePriceOnly">
      </div>
      <div class="col-xs-2 form-group">
        <label>Type</label>
        <select class="form-control" ng-model="side">
          <option>Buy</option>
          <option>Sell</option>
        </select>
      </div>
      <div class="col-xs-2 form-group">
        <label>Share Amount</label>
        <input type="number" class="form-control" id="shares" ng-model="shares" placeholder="Quantity">
      </div>
      <button type="submit" ng-click="addStock(stockData.Symbol)" class="btn btn-success">Add Stock</button>
    </form>

  </div>

<!--render portfolio holdings -->

  <div class="bs-example" data-example-id="hoverable-table">
    <table class="table table-hover">
      <thead>
        <tr>
          <th>Stock</th>
          <th>Position</th>
          <th>Cost Basis</th>
          <th>$ Exposure</th>
          <th>Long/Short</th>
          <th>Transaction Date</th>
          <th>Last</th>
        </tr>
      </thead>
      <tbody>
        <tr ng-repeat="stock in portfolio">
          <td>{{stock.ticker}}</td>
          <td>{{stock.shares}}</td>
          <td>{{stock.costBasis | currency}}</td>
          <td>{{stock.costBasis * stock.shares | currency}}</td>
          <td>{{stock.side}}</td>
          <td>{{stock.date | date: format : 'medium'}}</td>
          <td>{{last}}</td>
        </tr>
      </tbody>
    </table>
  </div>

      <p>Total Exposure: {{ totalExposure() | currency }}</p>

      <p>Last: {{last}}</p>

      <button type="submit" ng-click="updateLast()" class="btn btn-success">Update Last</button>



  </div>

    <script type="text/javascript" src="//code.jquery.com/jquery-2.1.4.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular.min.js"></script>
    <script type="text/javascript" src="/js/main.js"></script>
    <script type="text/javascript" src="/js/app.js"></script>
    <script type="text/javascript" src="/js/controllers.js"></script>
    <script type="text/javascript" src="/js/directives.js"></script>
    <script type="text/javascript" src="/js/filters.js"></script>
    <script type="text/javascript" src="/js/services.js"></script>
  </body>
</html>
